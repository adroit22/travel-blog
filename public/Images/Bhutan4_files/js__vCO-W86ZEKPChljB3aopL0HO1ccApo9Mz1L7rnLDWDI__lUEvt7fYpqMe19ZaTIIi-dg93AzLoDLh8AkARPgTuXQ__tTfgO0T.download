/* Source and licensing information for the line(s) below can be found at https://www.aman.com/sites/all/themes/custom/aman/static/source/js/vendor/GridGallery/js/jquery.cbpGridGallery.js. */
(function(t,e){'use strict';var l='CBPGridGallery',d=t.document.documentElement,u={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd','msTransition':'MSTransitionEnd','transition':'transitionend'},a,i={},f=function(s){if(!e)throw new Error('jQuery/Zepto is a dependency.');if(s.useMasonry&&!t.Masonry)throw new Error('Masonry.js is a dependency.');if(!t.Modernizr){throw new Error('Modernizr is a dependency.')}
else{i.support3d=Modernizr.csstransforms3d;i.transitions=Modernizr.csstransitions;a=u[Modernizr.prefixed('transition')]};return!0},n=function(e,t){e.style.WebkitTransform=t;e.style.msTransform=t;e.style.transform=t},s=function(){var e=d['clientWidth'],i=t['innerWidth'];if(e<i)return i;else return e},p=function(e,t){for(var i in t){if(t.hasOwnProperty(i))e[i]=t[i]};return e},m=function(t){var r=(t),n=e('> .grid-wrap',r),i=e('.gallery',r),s=e('> nav',i);if(!i.length){i=n.clone().attr('class','slideshow').appendTo(r);i.find('.grid').removeClass('grid');i.find('.grid-sizer').remove();i.find('img').each(function(t,i){e(i).replaceWith('<img data-src="'+(e(i).data('src')||i.src)+'" />').addClass(i.className)})};if(!s.length){s=e('<nav></nav>').appendTo(i);e('<span class="icon nav-next"></span>').appendTo(s);e('<span class="icon nav-prev"></span>').appendTo(s);e('<span class="icon nav-close"></span>').appendTo(s)}},h=function(t,i,n){var s=e(t),t=s[0],r=i?function(){setTimeout(i)}:e.noop,o=n||(t&&!(t.src&&t.src.length)&&s.data('src'));if(o){if(n){if(t.complete&&t.naturalWidth)r();else s.on('load error',r);if(!s.attr('src')&&s.data('src'))t.src=s.data('src')}
else{s.one('load error',r);t.src=s.data('src');if(t.complete)s.trigger('load')}}
else{r()}},c=function(t,i){var s=e('img',t),r=s.length,n=function(){i();e(t).trigger('allImagesLoaded')},o=0;s.each(function(e,t){h(t,function(){if(++o===r)n()},!0)})},o=function(i,s){var c=e.extend({viewport:t,padding:0.1},s),I=function(t){var i=t.data('originalWidth')||e('img',t)[0].naturalWidth,s=t.data('originalHeight')||e('img',t)[0].naturalHeight,n=t[0].style.display,r;if(i&&s)return{height:s,width:i};t.css({'display':'block','visibility':'hidden'});r={height:t.outerHeight(),width:t.outerWidth()};t.css({'display':n,'visibility':'visible'});return r},u=i.jQuery?i:e(i),f=e(c.viewport),o=f.width(),d=f.height(),m=I(u),a=m.width,l=m.height,p=a/l,r=a,n=l,h=o>800?c.padding:0.1,v=l>d,g=a>o;if(g&&v){if((a/o)>(l/d)){r=(1.0-h)*o;n=r/p}
else{n=(1.0-h)*d;r=n*p}}
else if(g){r=(1.0-h)*o;n=r/p}
else if(v){n=(1.0-h)*d;r=n*p};u.width(r).height(n).data({originalWidth:a,originalHeight:l});if(c.center)u.css({marginTop:(n/-2),marginLeft:(r/-2)});return{adaptedWidth:r,adaptedHeight:1-n}};function r(e,t){this.el=e;this.options=p({},this.options);f(p(this.options,t))&&this._init()};r.prototype.events=[];r.prototype.options={overlap:'150px',useMasonry:!0,preloadGrid:!0,centerGrid:!1,bindResize:!0,closeOnMaskClick:!0,updateLocationHash:!0,resizeGalleryPopup:!0};r.prototype.addEventListener=function(t,i,s,r){t=e(t).on(i+'.'+l,s);r||this.events.push([t,i+'.'+l,s])};r.prototype.remove=function(){for(var t=0,i=this.events.length,s;t<i;t++)this.events[t][0].off(this.events[t][1],this.events[t][2]);this.masonry&&this.masonry.destroy();e('.slideshow',this.el).remove()};r.prototype._init=function(){if(!e('.gallery',this.el).length)m(this.el);this.grid=this.el.querySelector('section.grid-wrap > ul.grid');this.gridItems=[].slice.call(this.grid.querySelectorAll('li:not(.grid-sizer)'));this.itemsCount=this.gridItems.length;this.slideshow=this.el.querySelector('section.slideshow > ul');this.slideshowItems=[].slice.call(this.slideshow.children);this.current=-1;this.ctrlPrev=this.el.querySelector('section.slideshow > nav > span.nav-prev');this.ctrlNext=this.el.querySelector('section.slideshow > nav > span.nav-next');this.ctrlClose=this.el.querySelector('section.slideshow > nav > span.nav-close');if(this.options.useMasonry)this._initMasonry();this._initEvents();var i=-1;if(this.options.updateLocationHash&&t.location.hash.length)i=e(this.gridItems).index(this.grid.querySelector('[data-slide-name="'+t.location.hash.replace('#','')+'"]'));if(i&&i>-1)this._openSlideshow(i)};r.prototype._initMasonry=function(){var t=this;function i(){t.masonry=new Masonry(t.grid,{itemSelector:'li',columnWidth:t.grid.querySelector('.grid-sizer'),isFitWidth:t.options.centerGrid,isResizeBound:t.options.bindResize})};if(!e('.grid-sizer',this.grid).length)e('<li class="grid-sizer"></li>').prependTo(this.grid);if(t.options.preloadGrid)c(t.grid,i);else i()};r.prototype._initEvents=function(){var i=this;e.each(this.gridItems,function(e,t){i.addEventListener(t,'click',function(){i._openSlideshow(e)})});e.each(this.slideshowItems,function(e,t){i.addEventListener(t,'swipeLeft',function(){i._navigate('next')});i.addEventListener(t,'swipeRight',function(){i._navigate('prev')})});i.addEventListener(i.ctrlPrev,'click',function(){i._navigate('prev')});i.addEventListener(i.ctrlNext,'click',function(){i._navigate('next')});i.addEventListener(i.ctrlClose,'click',function(){i._closeSlideshow()});i.addEventListener(t,'resize',function(){i._resizeHandler()});i.addEventListener(document,'keydown',function(e){if(i.isSlideshowVisible){var t=e.originalEvent,s=t.keyCode||t.which;switch(s){case 37:i._navigate('prev');break;case 39:i._navigate('next');break;case 27:i._closeSlideshow();break}}});i.addEventListener(t,'scroll',function(){if(i.isSlideshowVisible){t.scrollTo(i.scrollPosition?i.scrollPosition.x:0,i.scrollPosition?i.scrollPosition.y:0)}
else{i.scrollPosition={x:t.pageXOffset||d.scrollLeft,y:t.pageYOffset||d.scrollTop}}});if(i.options.closeOnMaskClick)i.addEventListener(i.slideshow,'click',function(e){if(e.target===i.slideshow)i._closeSlideshow()})};r.prototype._updateHash=function(){if(this.options.updateLocationHash&&e(this.currentItem).data('slide-name')){var i=e(this.currentItem).data('slide-name');if(history.pushState){history.pushState(null,null,'#'+i)}
else{t.location.hash=i}}};r.prototype._openSlideshow=function(t){e('.page-header').addClass('gallery-behind');e('.mobile-page-header').addClass('gallery-behind');var r=this,a;r.isSlideshowVisible=!0;r.current=t;e(r.el).addClass('slideshow-open');e('body,html').addClass('no-scroll');r._setViewportItems();a=e(r.currentItem);if(r.prevItem)a=a.add(r.prevItem);if(r.nextItem)a=a.add(r.nextItem);c(a,function(){e(r.currentItem).addClass('current show');o(r.currentItem,{center:!0});r._updateHash();if(r.prevItem){o(r.prevItem,{center:!0});e(r.prevItem).addClass('show');var t=Number(-1*(s()/2+r.prevItem.offsetWidth/2)),a='translate'+(i.support3d?'3d':'')+'('+t+(i.support3d?'px, 0, -'+r.options.overlap:'px')+')'+(!i.support3d?' scale(1.1)':'');n(r.prevItem,a)};if(r.nextItem){o(r.nextItem,{center:!0});e(r.nextItem).addClass('show');var t=Number(s()/2+r.nextItem.offsetWidth/2),a='translate'+(i.support3d?'3d':'')+'('+t+(i.support3d?'px, 0, -'+r.options.overlap:'px')+')'+(!i.support3d?' scale(1.1)':'');n(r.nextItem,a)}})};r.prototype._navigate=function(t){if(this.isAnimating)return;if(t==='next'&&this.current===this.itemsCount-1||t==='prev'&&this.current===0){this._closeSlideshow();return};this.isAnimating=!0;this._setViewportItems();var r=this,u=function(e){return i.support3d?'translate3d(-'+Number(s()/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+')':'translate(-'+Number(s()/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')},f=function(e){return i.support3d?'translate3d('+Number(s()/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+')':'translate('+Number(s()/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')},m='',d,p,l;if(t==='next'){d=function(e){return i.support3d?'translate3d( -'+Number((s()*2)/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+' )':'translate(-'+Number((s()*2)/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')};p=function(e){return i.support3d?'translate3d( '+Number((s()*2)/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+' )':'translate('+Number((s()*2)/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')}}
else{d=function(e){return i.support3d?'translate3d( '+Number((s()*2)/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+' )':'translate('+Number((s()*2)/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')};p=function(e){return i.support3d?'translate3d( -'+Number((s()*2)/2+e.offsetWidth/2)+'px, 0, -'+r.options.overlap+' )':'translate(-'+Number((s()*2)/2+e.offsetWidth/2)+'px)'+(!i.support3d?' scale(1.1)':'')}};e(r.slideshow).removeClass('animatable');if(t==='next'&&this.current<this.itemsCount-2||t==='prev'&&this.current>1){l=this.slideshowItems[t==='next'?this.current+2:this.current-2]};var c=function(){e(r.slideshow).addClass('animatable');e(r.currentItem).removeClass('current');var o=t==='next'?r.nextItem:r.prevItem;e(o).addClass('current');n(r.currentItem,t==='next'?u(r.currentItem):f(r.currentItem));if(r.nextItem){n(r.nextItem,t==='next'?m:d(r.nextItem))};if(r.prevItem){n(r.prevItem,t==='next'?d(r.prevItem):m)};if(l){n(l,t==='next'?f(l):u(l))};var s=function(n){if(i.transitions){if(n.propertyName.indexOf('transform')===-1)return!1;this.removeEventListener(a,s)};if(t==='next'){r.prevItem&&e(r.prevItem).removeClass('show');r.prevItem=r.currentItem;r.currentItem=r.nextItem;if(l){r.nextItem=l}}
else{r.nextItem&&e(r.nextItem).removeClass('show');r.nextItem=r.currentItem;r.currentItem=r.prevItem;if(l){r.prevItem=l}};r.current=t==='next'?r.current+1:r.current-1;r._updateHash();r.isAnimating=!1};if(i.transitions){r.currentItem.addEventListener(a,s)}
else{s()}};if(l){h(e('img',l)[0],function(){o(l,{center:!0});n(l,p(l));e(l).addClass('show');setTimeout(c,25)})}
else{c()}};r.prototype._closeSlideshow=function(t){e(this.el).removeClass('slideshow-open');e('body,html').removeClass('no-scroll');e('.page-header').removeClass('gallery-behind');e('.mobile-page-header').removeClass('gallery-behind');e(this.slideshow).removeClass('animatable');var s=this,r=function(t){if(i.transitions){if(t.target.tagName.toLowerCase()!=='ul')return;this.removeEventListener(a,r)};e(s.currentItem).removeClass('current show');if(s.prevItem){e(s.prevItem).removeClass('show')};if(s.nextItem){e(s.nextItem).removeClass('show')};e.each(s.slideshowItems,function(e,t){n(t,'')});s.isSlideshowVisible=!1};if(i.transitions){s.el.addEventListener(a,r)}
else{r()}};r.prototype._setViewportItems=function(){this.currentItem=null;this.prevItem=null;this.nextItem=null;if(this.current>0){this.prevItem=this.slideshowItems[this.current-1]};if(this.current<this.itemsCount-1){this.nextItem=this.slideshowItems[this.current+1]};this.currentItem=this.slideshowItems[this.current]};r.prototype._resizeHandler=function(){var e=this;function t(){e._resize();e._resizeTimeout=null};if(this._resizeTimeout){clearTimeout(this._resizeTimeout)};this._resizeTimeout=setTimeout(t,50)};r.prototype._resize=function(){if(this.isSlideshowVisible&&this.options.resizeGalleryPopup){var e=this;e.currentItem&&o(e.currentItem,{center:!0});if(e.prevItem){var t=Number(-1*(s()/2+e.prevItem.offsetWidth/2)),r='translate'+(i.support3d?'3d':'X')+'('+t+(i.support3d?'px, 0, -'+e.options.overlap:'px')+')'+(!i.support3d?' scale(1.1)':'');o(e.prevItem,{center:!0});n(e.prevItem,r)};if(e.nextItem){var t=Number(s()/2+e.nextItem.offsetWidth/2),r='translate'+(i.support3d?'3d':'X')+'('+t+(i.support3d?'px, 0, -'+e.options.overlap:'px')+')'+(!i.support3d?' scale(1.1)':'');o(e.nextItem,{center:!0});n(e.nextItem,r)}}};t.CBPGridGallery=r;if(e)e.fn[l]=function(e){return new r(this.get(0),e)}})(window,window.jQuery||window.Zepto);;
/* Source and licensing information for the above line(s) can be found at https://www.aman.com/sites/all/themes/custom/aman/static/source/js/vendor/GridGallery/js/jquery.cbpGridGallery.js. */
